{
    "id": "gemini-image",
    "name": "Gemini Image Generator",
    "version": "1.0.0",
    "description": "Generate images from conversation context using Gemini's image generation model. Use /image command to trigger.",
    "author": {
        "name": "Alma Plugins",
        "email": "hello@alma.now"
    },
    "main": "main.js",
    "engines": {
        "alma": "^0.1.0"
    },
    "type": "tool",
    "permissions": ["notifications", "tools:register", "storage", "secrets", "chat:read", "workspace:write"],
    "activationEvents": ["onStartup"],
    "contributes": {
        "tools": [
            {
                "id": "gemini-image.generateImage",
                "name": "Generate Image",
                "description": "Generate images from text description using Gemini"
            }
        ],
        "commands": [
            {
                "id": "gemini-image.image",
                "title": "Generate Image from Context",
                "category": "Gemini Image"
            },
            {
                "id": "gemini-image.provider",
                "title": "Select/View Providers",
                "category": "Gemini Image"
            },
            {
                "id": "gemini-image.generate",
                "title": "Generate Image (Dialog)",
                "category": "Gemini Image"
            },
            {
                "id": "gemini-image.selectProvider",
                "title": "Select Provider (Dialog)",
                "category": "Gemini Image"
            },
            {
                "id": "gemini-image.setApiKey",
                "title": "Set API Key",
                "category": "Gemini Image"
            },
            {
                "id": "gemini-image.clearApiKey",
                "title": "Clear API Key",
                "category": "Gemini Image"
            }
        ],
        "configuration": {
            "title": "Gemini Image Generator",
            "properties": {
                "geminiImage.providerId": {
                    "type": "string",
                    "default": "",
                    "description": "Selected provider ID (use 'Select Provider' command to choose)"
                },
                "geminiImage.baseUrl": {
                    "type": "string",
                    "default": "http://127.0.0.1:8317",
                    "description": "Base URL for the Gemini API proxy (used when no provider is selected)"
                },
                "geminiImage.apiKey": {
                    "type": "string",
                    "default": "",
                    "description": "API Key for Gemini API (leave empty if using proxy without auth)"
                },
                "geminiImage.model": {
                    "type": "string",
                    "default": "gemini-3-pro-image-preview",
                    "description": "Model to use for image generation"
                },
                "geminiImage.imageSize": {
                    "type": "string",
                    "enum": ["512x512", "1024x1024", "1536x1536"],
                    "default": "1024x1024",
                    "description": "Size of generated images"
                },
                "geminiImage.outputDir": {
                    "type": "string",
                    "default": "generated-images",
                    "description": "Subdirectory for saving generated images (relative to workspace root)"
                },
                "geminiImage.timeoutMs": {
                    "type": "number",
                    "default": 120000,
                    "description": "Timeout for API requests in milliseconds"
                },
                "geminiImage.maxContextMessages": {
                    "type": "number",
                    "default": 10,
                    "description": "Maximum number of recent messages to include as context"
                }
            }
        }
    }
}

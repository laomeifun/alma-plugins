{
    "id": "gemini-image",
    "name": "Gemini Image Generator",
    "version": "2.0.0",
    "description": "Generate images using OpenAI-compatible image generation APIs (like Gemini). Registers a generate_image tool for AI to use.",
    "author": {
        "name": "Alma Plugins",
        "email": "hello@alma.sh"
    },
    "main": "main.js",
    "engines": {
        "alma": "^0.1.0"
    },
    "type": "tool",
    "permissions": ["notifications", "tools:register", "storage", "secrets", "workspace:write"],
    "activationEvents": ["onStartup"],
    "contributes": {
        "tools": [
            {
                "id": "gemini-image.generate_image",
                "name": "Generate Image",
                "description": "Generate images from text description using AI"
            }
        ],
        "commands": [
            {
                "id": "gemini-image.setApiKey",
                "title": "Set API Key",
                "category": "Gemini Image"
            },
            {
                "id": "gemini-image.clearApiKey",
                "title": "Clear API Key",
                "category": "Gemini Image"
            }
        ],
        "configuration": {
            "title": "Gemini Image Generator",
            "properties": {
                "geminiImage.baseUrl": {
                    "type": "string",
                    "default": "http://127.0.0.1:8317",
                    "description": "Base URL for the image generation API (OpenAI-compatible endpoint)"
                },
                "geminiImage.apiKey": {
                    "type": "string",
                    "default": "",
                    "description": "API Key (leave empty if using proxy without auth, or use 'Set API Key' command for secure storage)"
                },
                "geminiImage.model": {
                    "type": "string",
                    "default": "gemini-3-pro-image-preview",
                    "description": "Model to use for image generation"
                },
                "geminiImage.imageSize": {
                    "type": "string",
                    "enum": ["512x512", "1024x1024", "1024x1792", "1792x1024"],
                    "default": "1024x1024",
                    "description": "Default size of generated images"
                },
                "geminiImage.outputDir": {
                    "type": "string",
                    "default": "generated-images",
                    "description": "Directory for saving generated images (relative to workspace root)"
                },
                "geminiImage.timeoutMs": {
                    "type": "number",
                    "default": 120000,
                    "minimum": 5000,
                    "maximum": 600000,
                    "description": "Timeout for API requests in milliseconds"
                },
                "geminiImage.mode": {
                    "type": "string",
                    "enum": ["auto", "images", "chat"],
                    "default": "auto",
                    "description": "API mode: 'auto' tries /images/generations first then /chat/completions, 'images' uses only /images/generations, 'chat' uses only /chat/completions"
                }
            }
        }
    }
}

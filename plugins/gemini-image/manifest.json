{
    "id": "gemini-image",
    "name": "Gemini Image Generator",
    "version": "1.0.0",
    "description": "Generate images from conversation context using Gemini's image generation model. Use /image command to trigger.",
    "author": {
        "name": "Alma Plugins",
        "email": "hello@alma.now"
    },
    "main": "main.js",
    "engines": {
        "alma": "^0.1.0"
    },
    "type": "tool",
    "permissions": ["notifications", "tools:register", "storage", "secrets", "chat:read", "workspace:write"],
    "activationEvents": ["onStartup"],
    "contributes": {
        "tools": [
            {
                "id": "gemini-image.generateImage",
                "name": "Generate Image",
                "description": "Generate images from text description using Gemini"
            }
        ],
        "commands": [
            {
                "id": "gemini-image.setApiKey",
                "title": "Set API Key",
                "category": "Gemini Image"
            },
            {
                "id": "gemini-image.clearApiKey",
                "title": "Clear API Key",
                "category": "Gemini Image"
            }
        ],
        "settings": {
            "geminiImage.baseUrl": {
                "type": "string",
                "default": "http://127.0.0.1:8317",
                "description": "Base URL for the Gemini API proxy"
            },
            "geminiImage.apiKey": {
                "type": "string",
                "default": "",
                "description": "API Key for Gemini API (stored in secrets)"
            },
            "geminiImage.model": {
                "type": "string",
                "default": "gemini-3-pro-image-preview",
                "description": "Model to use for image generation"
            },
            "geminiImage.imageSize": {
                "type": "string",
                "default": "1024x1024",
                "enum": ["512x512", "1024x1024", "1536x1536"],
                "description": "Size of generated images"
            },
            "geminiImage.outputDir": {
                "type": "string",
                "default": "generated-images",
                "description": "Subdirectory for saving generated images (relative to workspace root)"
            },
            "geminiImage.timeoutMs": {
                "type": "number",
                "default": 120000,
                "description": "Timeout for API requests in milliseconds"
            },
            "geminiImage.maxContextMessages": {
                "type": "number",
                "default": 10,
                "description": "Maximum number of recent messages to include as context"
            }
        }
    }
}
